<view class="page">
  <t-navbar title="账号设置" fixed="{{false}}">
    <view slot="subtitle" class="subtitle">管理头像、昵称和联系方式</view>
  </t-navbar>

  <scroll-view class="content" scroll-y>
    <!-- 账号 ID -->
    <view class="card">
      <view class="id-row">
        <view class="id-label-group">
          <text class="id-label">账号 ID</text>
          <text class="id-desc">用于标识你的云端账号，不对外展示</text>
        </view>
        <view class="id-value-row">
          <text class="id-value">{{accountId || '--'}}</text>
          <text class="id-copy" bindtap="onCopyId">复制</text>
        </view>
      </view>
    </view>

    <!-- 头像 & 昵称 & 性别 -->
    <view class="card">
      <view class="section-header">
        <text class="section-title">基础信息</text>
      </view>

      <view class="field-row avatar-row" bindtap="onChooseAvatar">
        <text class="field-label">头像</text>
        <image
          class="avatar"
          src="{{form.avatarUrl || defaultAvatar}}"
          mode="aspectFill"
        />
      </view>

      <view class="field-row">
        <text class="field-label">昵称</text>
        <view class="field-input">
          <t-input
            value="{{form.nickName}}"
            placeholder="请输入昵称"
            borderless="{{true}}"
            maxcharacter="{{20}}"
            bindchange="onNickNameChange"
          />
        </view>
      </view>

      <view class="field-row gender-row">
        <text class="field-label">性别</text>
        <t-radio-group
          value="{{form.gender}}"
          bindchange="onGenderChange"
        >
          <t-radio value="1" label="男" />
          <t-radio value="2" label="女" />
          <t-radio value="0" label="保密" />
        </t-radio-group>
      </view>
    </view>

    <!-- 联系方式 -->
    <view class="card">
      <view class="section-header">
        <text class="section-title">联系方式</text>
      </view>

      <view class="field-row">
        <text class="field-label">手机号</text>
        <view class="field-input">
          <t-input
            value="{{form.mobile}}"
            type="number"
            placeholder="可选，便于找回账号"
            borderless="{{true}}"
            maxcharacter="{{11}}"
            bindchange="onMobileChange"
          />
        </view>
      </view>

      <view class="field-column">
        <text class="field-label">其他联系方式</text>
        <view class="field-textarea">
          <t-textarea
            value="{{form.contact}}"
            placeholder="如邮箱、微信号等（可选）"
            borderless="{{true}}"
            maxcharacter="{{50}}"
            bindchange="onContactChange"
          />
        </view>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="actions">
      <t-button
        theme="primary"
        block="{{true}}"
        loading="{{saving}}"
        bindtap="onSave"
      >
        保存修改
      </t-button>

      <view class="danger-actions">
        <t-button
          variant="outline"
          theme="danger"
          block="{{true}}"
          bindtap="onLogout"
        >
          退出登录
        </t-button>
        <t-button
          variant="text"
          theme="danger"
          block="{{true}}"
          bindtap="onDeleteAccount"
        >
          注销账号（删除云端数据）
        </t-button>
      </view>
    </view>
  </scroll-view>
</view>


